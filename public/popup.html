<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PulsePortal</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <script src="./rssFetcher.js" type="module"></script>
    <!-- <script src="./rssFeedManager.js" type="module"></script> -->
    <script src="./popup.js" type="module"></script>

    <link rel="stylesheet" href="./popup.css">
</head>

<body id="top">
    <header></header>
    <div class="container">
        <div class="collapse" id="navbarToggleExternalContent">
            <div class="p-4">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <button class="nav-link" id="show-instructions" type="button">Show
                            Instructions</button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" id="toggle-url-list" type="button">Show/Hide URL List
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" id="resetLocalStorage" type="button">
                            Reset Local Storage
                        </button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" type="button" data-bs-toggle="modal" data-bs-target="#rssFeedModal">
                            Backup List
                        </button>
                    </li>
               </ul>
            </div>
        </div>
        <nav class="navbar navbar-custom">
            <div class="container-fluid">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
        </nav>
        <div class="row">
            <div id="instructions" style="display: none;">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-4">
                            <p>Welcome to PulsePortal! This app allows you to read news from multiple sources in one
                                place.
                            </p>
                            <p>To get started, add RSS feed URLs to the list on the left side of the screen. You can do
                                this
                                by
                                typing in a URL in the input field and clicking the "Submit" button. You can also remove
                                URLs
                                from
                                the list by clicking the "Remove" button next to each URL.</p>
                        </div>
                        <div class="col-md-4">
                            <p>Once you have added some URLs to the list, you can click the "Fetch All News" button to
                                fetch
                                the
                                latest news articles from all the sources. You can then use the news buttons to filter
                                the
                                articles
                                by source.</p>
                            <p>You can use the Reset Local Storage option, if the app is dealing with an invalid link
                                that
                                got
                                added
                                to the list by accident; I am working on a better error handling solution</p>
                        </div>
                        <div class="col-md-4">
                            The "Backup" modal feature allows you to manage a list of RSS feed URLs for backup purposes,
                            in case
                            you need to reset the news array. The list is saved in your browser's local storage for easy
                            access. Here's how to use the modal feature:

                            Open the modal by clicking the button or trigger element.
                            Add URLs to the list by entering them in the text area, one per line, and clicking "Save".
                            This saves the URLs, updates the list, and closes the modal.
                            Reopen the modal to view the saved URLs.
                            Remove a URL from the list by clicking the "Remove" button next to it. This also updates the
                            local storage.

                            Note that clearing the browser's local storage entirely will remove the saved list of URLs.
                            However, resetting the local storage for the news array should not affect the saved list
                            under 'localStorageB'.
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div id="url-list" style="display: none;">
                   <ul id="url-list-container" class="no-bullets"></ul>
                </div>
            </div>
            <div class="col-md-6 d-flex align-items-end">
                <form id="rss-form" class="d-flex">
                    <input id="rss-input" class="form-control me-2" type="text"
                        placeholder="Add to URL List [enter rss URL]" aria-label="Add to URL List [enter rss URL]" required>
                    <input type="submit" id="rss-submit" name="submitButton" value="Submit" class="btn btn-primary">
                </form>

            </div>
        </div>

        <!-- Modal -->
        <div class="modal fade" id="rssFeedModal" tabindex="-1" aria-labelledby="rssFeedModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="rssFeedModalLabel">Add RSS Feed URLs</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="rssFeedForm">
                            <div class="mb-3">
                                <label for="rssFeedUrls" class="form-label">Enter RSS Feed URLs (one per line)</label>
                                <textarea class="form-control" id="rssFeedUrls" rows="5"></textarea>
                            </div>
                        </form>
                        <!-- Container to display the list of URLs -->
                        <div class="container mt-5">
                            <h5>view and/or remove</h5>
                            <ul id="rssFeedList" class="list-group"></ul>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="saveRssFeedUrls">Save URLs</button>
                        <button type="button" class="btn btn-primary" id="shareByEmail">Share by Email</button>
                    </div>
                </div>
            </div>
        </div>
        <main>
            <button id="fetch-news-button" class="btn btn-primary">Fetch All News</button>
            <div id="news-buttons"></div>
            <div class="container">
                <div class="row">
                    <div class="news-container col-md-6">
                        <div id="news-list"></div>
                    </div>
                    <div class="podcast-container col-md-6">
                        <h4>Coming Soon | Podcast</h4>
                        <div class="search-podcast">
                            <form>
                                <input type="text" id="podcast-search-input" placeholder="Search for podcasts" required>
                                <button id="podcast-search-button">Search</button>
                            </form>
                        </div>
                        <div id="podcast-search-results" class="d-none"></div>
                        <div id="podcast-list"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>


</html>